$App = "AAA"
$Appcode = "aaa"
$Stage1 = "DevQA"
$Stage2 = "Prod"
$Stage1code = "dqa"
$Stage2code = "prod"
$Site1 = "westeurope"
$Site2 = "southeastasia"
$Site3 = "eastus"
$Site1code = "we"
$Site2code = "sea"
$Site3code = "eus"
$Site1Stage1CRRG = "rb-$Site1code-$Appcode-$Stage1code-csrcr-rg01"
$Site2Stage1CRRG = "rb-$Site2code-$Appcode-$Stage1code-csrcr-rg01"
$Site3Stage1CRRG = "rb-$Site3code-$Appcode-$Stage1code-csrcr-rg01"
$Site1Stage2CRRG = "rb-$Site1code-$Appcode-$Stage2code-csrcr-rg01"
$Site2Stage2CRRG = "rb-$Site2code-$Appcode-$Stage2code-csrcr-rg01"
$Site3Stage2CRRG = "rb-$Site3code-$Appcode-$Stage2code-csrcr-rg01"
$Site1Stage1VNETName = "rb-$Site1code-$Appcode-$Stage1code-vn01"
$Site2Stage1VNETName = "rb-$Site2code-$Appcode-$Stage1code-vn01"
$Site3Stage1VNETName = "rb-$Site3code-$Appcode-$Stage1code-vn01"
$Site1Stage2VNETName = "rb-$Site1code-$Appcode-$Stage2code-vn01"
$Site2Stage2VNETName = "rb-$Site2code-$Appcode-$Stage2code-vn01"
$Site3Stage2VNETName = "rb-$Site3code-$Appcode-$Stage2code-vn01"
$Site1Stage1AddressPrefix = "192.168.0.0/20"
$Site2Stage1AddressPrefix = "192.168.16.0/20"
$Site3Stage1AddressPrefix = "192.168.32.0/20"
$Site1Stage2AddressPrefix = "192.168.112.0/20"
$Site2Stage2AddressPrefix = "192.168.128.0/20"
$Site3Stage2AddressPrefix = "192.168.144.0/20"
$Site1Stage1MgmtSubnetName = "rb-$Site1code-$Appcode-$Stage1code-vn01-sn01"
$Site1Stage1OutsideSubnetName = "rb-$Site1code-$Appcode-$Stage1code-vn01-sn02"
$Site1Stage1DMZSubnetName = "rb-$Site1code-$Appcode-$Stage1code-vn01-sn03"
$Site1Stage1InsideSubnetName = "rb-$Site1code-$Appcode-$Stage1code-vn01-sn04"
$Site1Stage2MgmtSubnetName = "rb-$Site1code-$Appcode-$Stage2code-vn01-sn01"
$Site1Stage2OutsideSubnetName = "rb-$Site1code-$Appcode-$Stage2code-vn01-sn02"
$Site1Stage2DMZSubnetName = "rb-$Site1code-$Appcode-$Stage2code-vn01-sn03"
$Site1Stage2InsideSubnetName = "rb-$Site1code-$Appcode-$Stage2code-vn01-sn04"
$Site2Stage1MgmtSubnetName = "rb-$Site2code-$Appcode-$Stage1code-vn01-sn01"
$Site2Stage1OutsideSubnetName = "rb-$Site2code-$Appcode-$Stage1code-vn01-sn02"
$Site2Stage1DMZSubnetName = "rb-$Site2code-$Appcode-$Stage1code-vn01-sn03"
$Site2Stage1InsideSubnetName = "rb-$Site2code-$Appcode-$Stage1code-vn01-sn04"
$Site2Stage2MgmtSubnetName = "rb-$Site2code-$Appcode-$Stage2code-vn01-sn01"
$Site2Stage2OutsideSubnetName = "rb-$Site2code-$Appcode-$Stage2code-vn01-sn02"
$Site2Stage2DMZSubnetName = "rb-$Site2code-$Appcode-$Stage2code-vn01-sn03"
$Site2Stage2InsideSubnetName = "rb-$Site2code-$Appcode-$Stage2code-vn01-sn04"
$Site3Stage1MgmtSubnetName = "rb-$Site3code-$Appcode-$Stage1code-vn01-sn01"
$Site3Stage1OutsideSubnetName = "rb-$Site3code-$Appcode-$Stage1code-vn01-sn02"
$Site3Stage1DMZSubnetName = "rb-$Site3code-$Appcode-$Stage1code-vn01-sn03"
$Site3Stage1InsideSubnetName = "rb-$Site3code-$Appcode-$Stage1code-vn01-sn04"
$Site3Stage2MgmtSubnetName = "rb-$Site3code-$Appcode-$Stage2code-vn01-sn01"
$Site3Stage2OutsideSubnetName = "rb-$Site3code-$Appcode-$Stage2code-vn01-sn02"
$Site3Stage2DMZSubnetName = "rb-$Site3code-$Appcode-$Stage2code-vn01-sn03"
$Site3Stage2InsideSubnetName = "rb-$Site3code-$Appcode-$Stage2code-vn01-sn04"
$Site1Stage1MgmtSubnetPrefix = "192.168.0.0/24"
$Site1Stage1OutsideSubnetPrefix = "192.168.1.0/24"
$Site1Stage1DMZSubnetPrefix = "192.168.2.0/24"
$Site1Stage1InsideSubnetPrefix = "192.168.3.0/24"
$Site1Stage2MgmtSubnetPrefix = "192.168.112.0/24"
$Site1Stage2OutsideSubnetPrefix = "192.168.113.0/24"
$Site1Stage2DMZSubnetPrefix = "192.168.114.0/24"
$Site1Stage2InsideSubnetPrefix = "192.168.115.0/24"
$Site2Stage1MgmtSubnetPrefix = "192.168.16.0/24"
$Site2Stage1OutsideSubnetPrefix = "192.168.17.0/24"
$Site2Stage1DMZSubnetPrefix = "192.168.18.0/24"
$Site2Stage1InsideSubnetPrefix = "192.168.19.0/24"
$Site2Stage2MgmtSubnetPrefix = "192.168.128.0/24"
$Site2Stage2OutsideSubnetPrefix = "192.168.129.0/24"
$Site2Stage2DMZSubnetPrefix = "192.168.130.0/24"
$Site2Stage2InsideSubnetPrefix = "192.168.131.0/24"
$Site3Stage1MgmtSubnetPrefix = "192.168.32.0/24"
$Site3Stage1OutsideSubnetPrefix = "192.168.33.0/24"
$Site3Stage1DMZSubnetPrefix = "192.168.34.0/24"
$Site3Stage1InsideSubnetPrefix = "192.168.35.0/24"
$Site3Stage2MgmtSubnetPrefix = "192.168.144.0/24"
$Site3Stage2OutsideSubnetPrefix = "192.168.145.0/24"
$Site3Stage2DMZSubnetPrefix = "192.168.146.0/24"
$Site3Stage2InsideSubnetPrefix = "192.168.147.0/24"


$Site1Stage1MgmtSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site1Stage1MgmtSubnetName" -AddressPrefix "$Site1Stage1MgmtSubnetPrefix"
$Site1Stage1OutsideSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site1Stage1OutsideSubnetName" -AddressPrefix "$Site1Stage1OutsideSubnetPrefix"
$Site1Stage1DMZSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site1Stage1DMZSubnetName" -AddressPrefix "$Site1Stage1DMZSubnetPrefix"
$Site1Stage1InsideSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site1Stage1InsideSubnetName" -AddressPrefix "$Site1Stage1InsideSubnetPrefix"
$Site1Stage2MgmtSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site1Stage2MgmtSubnetName" -AddressPrefix "$Site1Stage2MgmtSubnetPrefix"
$Site1Stage2OutsideSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site1Stage2OutsideSubnetName" -AddressPrefix "$Site1Stage2OutsideSubnetPrefix"
$Site1Stage2DMZSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site1Stage2DMZSubnetName" -AddressPrefix "$Site1Stage2DMZSubnetPrefix"
$Site1Stage2InsideSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site1Stage2InsideSubnetName" -AddressPrefix "$Site1Stage2InsideSubnetPrefix"
$Site2Stage1MgmtSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site2Stage1MgmtSubnetName" -AddressPrefix "$Site2Stage1MgmtSubnetPrefix"
$Site2Stage1OutsideSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site2Stage1OutsideSubnetName" -AddressPrefix "$Site2Stage1OutsideSubnetPrefix"
$Site2Stage1DMZSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site2Stage1DMZSubnetName" -AddressPrefix "$Site2Stage1DMZSubnetPrefix"
$Site2Stage1InsideSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site2Stage1InsideSubnetName" -AddressPrefix "$Site2Stage1InsideSubnetPrefix"
$Site2Stage2MgmtSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site2Stage2MgmtSubnetName" -AddressPrefix "$Site2Stage2MgmtSubnetPrefix"
$Site2Stage2OutsideSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site2Stage2OutsideSubnetName" -AddressPrefix "$Site2Stage2OutsideSubnetPrefix"
$Site2Stage2DMZSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site2Stage2DMZSubnetName" -AddressPrefix "$Site2Stage2DMZSubnetPrefix"
$Site2Stage2InsideSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site2Stage2InsideSubnetName" -AddressPrefix "$Site2Stage2InsideSubnetPrefix"
$Site3Stage1MgmtSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site3Stage1MgmtSubnetName" -AddressPrefix "$Site3Stage1MgmtSubnetPrefix"
$Site3Stage1OutsideSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site3Stage1OutsideSubnetName" -AddressPrefix "$Site3Stage1OutsideSubnetPrefix"
$Site3Stage1DMZSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site3Stage1DMZSubnetName" -AddressPrefix "$Site3Stage1DMZSubnetPrefix"
$Site3Stage1InsideSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site3Stage1InsideSubnetName" -AddressPrefix "$Site3Stage1InsideSubnetPrefix"
$Site3Stage2MgmtSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site3Stage2MgmtSubnetName" -AddressPrefix "$Site3Stage2MgmtSubnetPrefix"
$Site3Stage2OutsideSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site3Stage2OutsideSubnetName" -AddressPrefix "$Site3Stage2OutsideSubnetPrefix"
$Site3Stage2DMZSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site3Stage2DMZSubnetName" -AddressPrefix "$Site3Stage2DMZSubnetPrefix"
$Site3Stage2InsideSubnet = New-AzureRmVirtualNetworkSubnetConfig -Name "$Site3Stage2InsideSubnetName" -AddressPrefix "$Site3Stage2InsideSubnetPrefix"

New-AzureRmVirtualNetwork -Name $Site1Stage1VNETName -ResourceGroupName $Site1Stage1CRRG -Location $Site1 -AddressPrefix $Site1Stage1AddressPrefix -Subnet $Site1Stage1MgmtSubnet,$Site1Stage1OutsideSubnet,$Site1Stage1DMZSubnet,$Site1Stage1InsideSubnet -Tag @{ App="$App";  Stage="$Stage1" }
New-AzureRmVirtualNetwork -Name $Site1Stage2VNETName -ResourceGroupName $Site1Stage2CRRG -Location $Site1 -AddressPrefix $Site1Stage2AddressPrefix -Subnet $Site1Stage2MgmtSubnet,$Site1Stage2OutsideSubnet,$Site1Stage2DMZSubnet,$Site1Stage2InsideSubnet -Tag @{ App="$App";  Stage="$Stage2" }
New-AzureRmVirtualNetwork -Name $Site2Stage1VNETName -ResourceGroupName $Site2Stage1CRRG -Location $Site2 -AddressPrefix $Site2Stage1AddressPrefix -Subnet $Site2Stage1MgmtSubnet,$Site2Stage1OutsideSubnet,$Site2Stage1DMZSubnet,$Site2Stage1InsideSubnet -Tag @{ App="$App";  Stage="$Stage1" }
New-AzureRmVirtualNetwork -Name $Site2Stage2VNETName -ResourceGroupName $Site2Stage2CRRG -Location $Site2 -AddressPrefix $Site2Stage2AddressPrefix -Subnet $Site2Stage2MgmtSubnet,$Site2Stage2OutsideSubnet,$Site2Stage2DMZSubnet,$Site2Stage2InsideSubnet -Tag @{ App="$App";  Stage="$Stage2" }
New-AzureRmVirtualNetwork -Name $Site3Stage2VNETName -ResourceGroupName $Site3Stage2CRRG -Location $Site3 -AddressPrefix $Site3Stage2AddressPrefix -Subnet $Site3Stage2MgmtSubnet,$Site3Stage2OutsideSubnet,$Site3Stage2DMZSubnet,$Site3Stage2InsideSubnet -Tag @{ App="$App";  Stage="$Stage2" } 
